#!/bin/bash

#/ NAME
#/     meat -- sources a meaty library and dump arguments
#/
#/ SYNOPSIS
#/     meat [meat | prime ] [arguments ...]
#/
#/ DESCRIPTION
#/     The first argument specifies which library to load:
#/       * meat - core library
#/       * prime - core library plus restrictions
#/
#/     The rest of the arguments are arbitrary.

shome="$(cd -P -- "$(dirname -- "$0")/.." && pwd -P)"
source "$shome/lib/_meat" "$@"
check_help "$@"

function dump_args {
  echo "0' $shome"

  local i=1
  while [[ "$#" > 0 ]]; do
    echo "$i: $1"; shift
    i="$((i+1))"
  done
}

function main {
  local quality="$1"; shift
  require "$quality" "$@"
  dump_args "$@"
}

main "$@"
