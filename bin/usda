#!/bin/bash

#/ NAME
#/     usda -- runs test against meaty libraries using arbitrary arguments
#/
#/ SYNOPSIS
#/     usda [arguments ...]

shome="$(cd -P -- "$(dirname -- "$0")/.." && pwd -P)"
source "$shome/lib/_prime" "$@"
check_help "$@"

function gamut {
  "$shome/bin/meat" "$@"

  pushd "$shome/bin" > /dev/null
  ./meat "$@"
  popd > /dev/null

  pushd "$shome/lib" > /dev/null
  ../bin/meat "$@"
  popd > /dev/null

  meat "$@"
}

function main {
  gamut meat "$@"
  gamut prime "$@"
}

main "$@" | sort | uniq -c
